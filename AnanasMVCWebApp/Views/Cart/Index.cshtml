@using AnanasMVCWebApp.Models.ViewModels
@model CartViewModel
@{
    ViewData["Title"] = "Cart";
}

@if(Model.CartItems.Count == 0){
    <div class="empty-cart-wrapper wide">
        <div>
            <h4>Giỏ hàng của bạn</h4>
            <p>Bạn đang không có sản phẩm nào trong giỏ hàng!</p>
            @Html.ActionLink("Quay lại mua hàng", "Index", "Product")
        </div>
    </div>
} else {
    <div class="cart-wrapper wide">
        <div class="cart-list-wrapper">
            <div class="cart-header">
                <h4>Giỏ hàng</h4>
                <p>Bạn đang có <span class="decor">@Model.CartItems.Count sản phẩm</span> trong giỏ hàng</p>
            </div>
            <div class="cart-list__item-container">
                @foreach (var item in Model.CartItems) {
                    <div class="cart-list__item">
                        <div class="cart-item__image">
                            <img src="~/uploads/@item.ImageName" alt="">
                        </div>
                        <div class="cart-item__info">
                            <div class="item-infos">
                                <div class="item-name">@item.ProductName</div>
                                <div class="item-unit-price">@Html.FormatValue(@item.Price, "{0:0,0}") VND</div>
                            </div>
                            <div class="item-options">
                                <div class="item-option__size">
                                    <div class="option-label">Size</div>
                                    <div class="select-wrapper">
                                        <i class="fa-solid fa-angle-down"></i>
                                        <select name="" id="">
                                            @foreach (var size in item.SizeList) {
                                                @if (size.Name == item.Size) {
                                                    <option value="@size.Code" selected>@size.Name</option>
                                                } else {
                                                    <option value="@size.Code">@size.Name</option>
                                                }
                                                
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="item-option__quantity">
                                    <div class="option-label">Quantity</div>
                                    <div class="select-wrapper">
                                        <i class="fa-solid fa-angle-down"></i>
                                        <select name="" id="">
                                            @for (int index = 1; index <= item.Stock; index++) {
                                                @if (index == item.Quantity) {
                                                    <option value="@index" selected>@index</option>
                                                } else {
                                                    <option value="@index">@index</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="cart-item__actions">
                            <div class="actions-wrapper">
                                <button><i class="fa-solid fa-xmark"></i></button>
                                <button><i class="fa-regular fa-heart"></i></button>
                            </div>
                            <div class="item-subtotal">@Html.FormatValue(@item.SubTotal, "{0:0,0}") VND</div>
                        </div>
                    </div>
                }
            </div>
        </div>
        <div class="cart-summary-wrapper">
            <div class="summary-panel">
                <h5>Order Summary</h5>
                <hr class="divider top">
                <ul>
                    <li>
                        <span>Đơn hàng</span>
                        <span>@Html.FormatValue(Model.GrandTotal, "{0:0,0}") VND</span>
                    </li>
                    <li>
                        <span>Giảm</span>
                        <span>0 VND</span>
                    </li>
                </ul>
                <hr class="divider">
                <ul class="total">
                    <li>
                        <span>Tạm tính</span>
                        <span>@Html.FormatValue(Model.GrandTotal, "{0:0,0}") VND</span>
                    </li>
                </ul>
                <button>Thanh toán</button>
            </div>
        </div>
    </div>
}

